# ğŸ›‘ SISTEMA DE ENFORCEMENT AUTOMÃTICO - CLAUDE CODE

## âš ï¸ REGLAS CRÃTICAS - VIOLACIÃ“N = DETENCIÃ“N INMEDIATA

### ğŸ”´ CHECKPOINT OBLIGATORIO ANTES DE CUALQUIER CÃ“DIGO

**ANTES de escribir CUALQUIER lÃ­nea de cÃ³digo, DEBO:**

```bash
# PASO 1: VERIFICAR ARCHIVO ACTUAL
wc -l [archivo_a_modificar]
# Si > 250 lÃ­neas â†’ STOP â†’ Crear nuevo archivo

# PASO 2: CALCULAR IMPACTO
# Â¿CuÃ¡ntas lÃ­neas agregarÃ©? Si > 50 â†’ STOP â†’ Crear componente separado

# PASO 3: VALIDAR ARQUITECTURA
# Â¿Es un preview? â†’ DEBE ir en /components/editor/preview/[Name]Preview.tsx
# Â¿Es un editor? â†’ DEBE ir en /components/editor/[Name]Editor.tsx
```

## ğŸ“Š ARCHIVOS EN VIOLACIÃ“N ACTUAL (NO TOCAR - SOLO NUEVOS MÃ“DULOS)

| Archivo | LÃ­neas | Estado |
|---------|--------|--------|
| EditorPreview.tsx | 1,763 | âŒ CONGELADO - NO AGREGAR MÃS |
| EditorSidebar.tsx | ??? | âš ï¸ VERIFICAR ANTES DE MODIFICAR |

## âœ… ESTRUCTURA OBLIGATORIA PARA NUEVOS MÃ“DULOS

```
components/
â”œâ”€â”€ editor/
â”‚   â”œâ”€â”€ modules/           # ğŸ†• NUEVA CARPETA PARA MÃ“DULOS
â”‚   â”‚   â”œâ”€â”€ [ModuleName]/
â”‚   â”‚   â”‚   â”œâ”€â”€ [ModuleName]Editor.tsx      (<300 lÃ­neas)
â”‚   â”‚   â”‚   â”œâ”€â”€ [ModuleName]Preview.tsx     (<300 lÃ­neas)
â”‚   â”‚   â”‚   â”œâ”€â”€ [ModuleName]Config.tsx      (<300 lÃ­neas)
â”‚   â”‚   â”‚   â”œâ”€â”€ [ModuleName]Types.ts        (<100 lÃ­neas)
â”‚   â”‚   â”‚   â””â”€â”€ index.ts                    (exports)
```

## ğŸ¤– AUTO-VERIFICACIÃ“N EN CADA ARCHIVO NUEVO

```typescript
/**
 * @file [NombreArchivo].tsx
 * @max-lines 300
 * @module [NombreModulo]
 * @created [Fecha]
 * 
 * CHECKPOINT VALIDATIONS:
 * âœ… File will be < 300 lines
 * âœ… Following modular architecture
 * âœ… Separated preview/editor/config
 * âœ… Types in separate file
 */
```

## ğŸ”¥ SCRIPT DE VALIDACIÃ“N AUTOMÃTICA

```bash
#!/bin/bash
# validate-module.sh

FILE=$1
MAX_LINES=300

if [ ! -f "$FILE" ]; then
    echo "âœ… New file - will create with proper structure"
    exit 0
fi

LINES=$(wc -l < "$FILE")
if [ $LINES -gt $MAX_LINES ]; then
    echo "âŒ ERROR: File has $LINES lines (max: $MAX_LINES)"
    echo "ğŸ›‘ STOPPED: Cannot add code to this file"
    echo "âœ… SOLUTION: Create new module in components/editor/modules/"
    exit 1
fi

echo "âœ… File has $LINES lines - can add up to $((MAX_LINES - LINES)) more lines"
```

## ğŸ“‹ CHECKLIST MANDATORIO PARA CADA MÃ“DULO

- [ ] Â¿El archivo destino tiene < 250 lÃ­neas?
- [ ] Â¿Mi cÃ³digo agregarÃ¡ < 50 lÃ­neas?
- [ ] Â¿Estoy usando la estructura modular?
- [ ] Â¿SeparÃ© preview, editor y config?
- [ ] Â¿Los types estÃ¡n en archivo separado?
- [ ] Â¿SeguÃ­ el patrÃ³n de carpetas modules/?

**SI ALGUNO ES NO â†’ STOP â†’ CREAR MÃ“DULO SEPARADO**

## ğŸ¯ EJEMPLO DE MÃ“DULO CORRECTO

```
components/editor/modules/Gallery/
â”œâ”€â”€ GalleryEditor.tsx      # 180 lÃ­neas - ConfiguraciÃ³n
â”œâ”€â”€ GalleryPreview.tsx     # 120 lÃ­neas - VisualizaciÃ³n
â”œâ”€â”€ GalleryConfig.tsx      # 95 lÃ­neas - Panel de config
â”œâ”€â”€ GalleryTypes.ts        # 25 lÃ­neas - Tipos
â””â”€â”€ index.ts              # 5 lÃ­neas - Exports
```

## âš ï¸ RECORDATORIO CRÃTICO

**EditorPreview.tsx estÃ¡ CONGELADO**
- NO agregar mÃ¡s imports
- NO agregar mÃ¡s casos al switch
- NO agregar mÃ¡s funciones
- Para nuevos mÃ³dulos â†’ Crear en /modules/[ModuleName]/

## ğŸš€ COMANDO DE INICIO DE MÃ“DULO

Cuando el usuario pida un nuevo mÃ³dulo, PRIMERO ejecutar:
```bash
# Crear estructura base
mkdir -p components/editor/modules/[ModuleName]
touch components/editor/modules/[ModuleName]/[ModuleName]Editor.tsx
touch components/editor/modules/[ModuleName]/[ModuleName]Preview.tsx
touch components/editor/modules/[ModuleName]/[ModuleName]Config.tsx
touch components/editor/modules/[ModuleName]/[ModuleName]Types.ts
touch components/editor/modules/[ModuleName]/index.ts
```

---
ÃšLTIMA ACTUALIZACIÃ“N: 2025-01-15
RAZÃ“N: EditorPreview.tsx violÃ³ lÃ­mite de 300 lÃ­neas (1,763 actual)